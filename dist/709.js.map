{"version":3,"file":"709.js","mappings":"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","sources":["webpack://starling-word-addin/./src/taskpane/modules/ui-display.js"],"sourcesContent":["// UI Display Module - handles all result display functionality\n// NO STATIC IMPORTS - All imports will be dynamic to prevent Word API access during loading\n\n// Display combined analysis results\nexport function displayCombinedAnalysisResults(analysisResult, riskAnalysis, changeSuggestions, summaryResult) {\n  const resultsContent = document.getElementById(\"results-content\");\n  const resultsSection = document.getElementById(\"results-section\");\n\n  // Get contract structure data\n  const structure = analysisResult.contract_structure;\n  const modifiedClauses = structure.articles.reduce((count, article) =>\n    count + article.clauses.filter(clause => clause.changeStatus?.isModified).length, 0);\n  const totalClauses = structure.articles.reduce((count, article) => count + article.clauses.length, 0);\n\n  let html = `\n    <div class=\"analysis-results\">\n      <!-- 1. CONTRACT STRUCTURE BREAKDOWN (FIRST) -->\n      <div class=\"analysis-section contract-structure\">\n        <h3>📋 Contract Structure</h3>\n        <div class=\"structure-overview\">\n          <p><strong>Total Articles:</strong> ${structure.articles.length}</p>\n          <p><strong>Total Clauses:</strong> ${totalClauses}</p>\n        </div>\n        \n        <div class=\"articles-breakdown\">`;\n\n  // Display each article with its clauses\n  structure.articles.forEach(article => {\n    html += `\n          <div class=\"article-item\">\n            <h4 class=\"article-title\">${article.number}. ${article.title}</h4>\n            <div class=\"clauses-list\">`;\n    \n    article.clauses.forEach(clause => {\n      const statusClass = clause.changeStatus?.isModified ? 'modified' : 'unmodified';\n      const statusColor = clause.changeStatus?.isModified ? 'red' : 'green';\n      \n      html += `\n              <div class=\"clause-item ${statusClass}\">\n                <span class=\"clause-number\" style=\"color: ${statusColor};\">${clause.number}</span>\n                <span class=\"clause-text\">${clause.text.substring(0, 100)}${clause.text.length > 100 ? '...' : ''}</span>\n              </div>`;\n    });\n    \n    html += `\n            </div>\n          </div>`;\n  });\n\n  html += `\n        </div>\n      </div>\n\n      <!-- 2. TRACK CHANGES SUMMARY (AFTER STRUCTURE) -->\n      <div class=\"analysis-section track-changes-summary\">\n        <h3>🔄 Track Changes Summary</h3>\n        ${structure.trackChanges ? `\n          <div class=\"change-tracking-info\">\n            <p><strong>Track Changes:</strong> ${structure.trackChanges.enabled ? 'Enabled' : 'Disabled'}</p>\n            ${structure.trackChanges.enabled ? `\n              <p><strong>Modified Clauses:</strong> <span class=\"modified-count\">${modifiedClauses}</span> / ${totalClauses}</p>\n              <p><strong>Unmodified Clauses:</strong> <span class=\"unmodified-count\">${totalClauses - modifiedClauses}</span> / ${totalClauses}</p>\n            ` : ''}\n            ${structure.trackChanges.note ? `<p class=\"track-changes-note\"><em>${structure.trackChanges.note}</em></p>` : ''}\n            ${structure.trackChanges.demoMode ? '<p class=\"demo-note\"><em>Demo mode - simulated changes for testing</em></p>' : ''}\n          </div>\n          ${structure.trackChanges.enabled ? `\n            <div class=\"change-legend\">\n              <div class=\"legend-item\">\n                <span class=\"legend-indicator modified\"></span>\n                <span>Modified Clause</span>\n              </div>\n              <div class=\"legend-item\">\n                <span class=\"legend-indicator unmodified\"></span>\n                <span>Unmodified Clause</span>\n              </div>\n            </div>\n          ` : ''}\n        ` : ''}\n      </div>\n\n      <!-- 3. EXECUTIVE SUMMARY SECTION -->\n      <div class=\"analysis-summary\">\n        <h3>${summaryResult.title}</h3>\n        <div class=\"summary-overview\">\n          <p>${summaryResult.overview}</p>\n        </div>\n        \n        <div class=\"summary-metrics\">\n          <div class=\"metric-item\">\n            <span class=\"metric-label\">Contract Type:</span>\n            <span class=\"metric-value\">${analysisResult.contract_type}</span>\n          </div>\n          <div class=\"metric-item\">\n            <span class=\"metric-label\">Word Count:</span>\n            <span class=\"metric-value\">${analysisResult.word_count}</span>\n          </div>\n          <div class=\"metric-item\">\n            <span class=\"metric-label\">Compliance Score:</span>\n            <span class=\"metric-value compliance-score\">${analysisResult.compliance_score}%</span>\n          </div>\n          <div class=\"metric-item\">\n            <span class=\"metric-label\">Risk Score:</span>\n            <span class=\"metric-value risk-score\">${riskAnalysis.risk_score}%</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- 4. DETAILED ANALYSIS SECTIONS -->\n      <div class=\"detailed-analysis\">\n        \n        <!-- Risk Analysis -->\n        <div class=\"analysis-section risks\">\n          <h3>⚠️ Risk Analysis</h3>\n          <p class=\"section-summary\">${riskAnalysis.summary}</p>\n          \n          <div class=\"risks-list\">`;\n\n  riskAnalysis.risks.forEach(risk => {\n    const severityClass = `severity-${risk.severity}`;\n    html += `\n            <div class=\"risk-item ${severityClass}\">\n              <div class=\"risk-header\">\n                <span class=\"risk-severity\">${risk.severity.toUpperCase()}</span>\n                <span class=\"risk-title\">${risk.title}</span>\n              </div>\n              <p class=\"risk-description\">${risk.description}</p>\n              <p class=\"risk-suggestion\"><strong>Suggestion:</strong> ${risk.suggestion}</p>\n            </div>`;\n  });\n\n  html += `\n          </div>\n        </div>\n\n        <!-- Change Suggestions -->\n        <div class=\"analysis-section suggestions\">\n          <h3>💡 Improvement Suggestions</h3>\n          <p class=\"section-summary\">${changeSuggestions.summary}</p>\n          \n          <div class=\"suggestions-list\">`;\n\n  changeSuggestions.suggestions.forEach(suggestion => {\n    const priorityClass = `priority-${suggestion.priority}`;\n    html += `\n            <div class=\"suggestion-item ${priorityClass}\">\n              <div class=\"suggestion-header\">\n                <span class=\"suggestion-priority\">${suggestion.priority.toUpperCase()}</span>\n                <span class=\"suggestion-title\">${suggestion.title}</span>\n              </div>\n              <div class=\"suggestion-details\">\n                <p><strong>Current:</strong> ${suggestion.current}</p>\n                <p><strong>Suggested:</strong> ${suggestion.suggested}</p>\n                <p><strong>Benefit:</strong> ${suggestion.benefit}</p>\n              </div>\n            </div>`;\n  });\n\n  html += `\n          </div>\n        </div>\n\n        <!-- Key Terms -->\n        <div class=\"analysis-section key-terms\">\n          <h3>🔑 Key Terms Identified</h3>\n          <div class=\"terms-list\">`;\n\n  analysisResult.key_terms.forEach(term => {\n    html += `<span class=\"term-tag\">${term}</span>`;\n  });\n\n  html += `\n          </div>\n        </div>\n\n        <!-- Recommendations -->\n        <div class=\"analysis-section recommendations\">\n          <h3>📝 Recommendations</h3>\n          <ul class=\"recommendations-list\">`;\n\n  analysisResult.recommendations.forEach(rec => {\n    html += `<li>${rec}</li>`;\n  });\n\n  html += `\n          </ul>\n        </div>\n      </div>\n    </div>`;\n\n  resultsContent.innerHTML = html;\n  resultsSection.style.display = \"block\";\n\n  // Show suggestions section with Apply Changes button\n  showSuggestionsSection(changeSuggestions);\n}\n\n// Show suggestions section with apply changes functionality\nexport function showSuggestionsSection(changeSuggestions) {\n  const suggestionsSection = document.getElementById(\"suggestions-section\");\n  const suggestionsContent = document.getElementById(\"suggestions-content\");\n\n  let html = `\n    <div class=\"suggestions-header\">\n      <h3>💡 Contract Improvement Suggestions</h3>\n      <p>Review and apply the following suggestions to improve your contract:</p>\n    </div>\n    \n    <div class=\"suggestions-list\">`;\n\n  changeSuggestions.suggestions.forEach((suggestion, index) => {\n    const priorityClass = `priority-${suggestion.priority}`;\n    html += `\n      <div class=\"suggestion-card ${priorityClass}\">\n        <div class=\"suggestion-header\">\n          <span class=\"priority-badge ${suggestion.priority}\">${suggestion.priority.toUpperCase()}</span>\n          <h4>${suggestion.title}</h4>\n        </div>\n        <div class=\"suggestion-content\">\n          <div class=\"current-state\">\n            <strong>Current:</strong> ${suggestion.current}\n          </div>\n          <div class=\"suggested-change\">\n            <strong>Suggested:</strong> ${suggestion.suggested}\n          </div>\n          <div class=\"benefit\">\n            <strong>Benefit:</strong> ${suggestion.benefit}\n          </div>\n        </div>\n        <div class=\"suggestion-actions\">\n          <button class=\"apply-suggestion-btn\" onclick=\"applySuggestion(${index})\">\n            Apply This Change\n          </button>\n        </div>\n      </div>`;\n  });\n\n  html += `\n    </div>\n    \n    <div class=\"suggestions-actions\">\n      <button id=\"apply-all-changes-btn\" class=\"primary-button\" onclick=\"applyAllChanges()\">\n        Apply All Changes\n      </button>\n      <button id=\"dismiss-suggestions-btn\" class=\"secondary-button\" onclick=\"dismissSuggestions()\">\n        Dismiss Suggestions\n      </button>\n    </div>`;\n\n  suggestionsContent.innerHTML = html;\n  suggestionsSection.style.display = \"block\";\n}\n\n// Display contract generation results\nexport function displayContractResults(result) {\n  const resultsContent = document.getElementById(\"results-content\");\n  const resultsSection = document.getElementById(\"results-section\");\n\n  const html = `\n    <div class=\"contract-results\">\n      <h3>✅ Contract Generated Successfully</h3>\n      <div class=\"contract-info\">\n        <p><strong>Contract Type:</strong> ${result.metadata?.template_used || 'Content Management Agreement'}</p>\n        <p><strong>Generated:</strong> ${new Date(result.metadata?.generated_at || new Date()).toLocaleString()}</p>\n        <p><strong>Status:</strong> <span class=\"status-success\">Ready for Review</span></p>\n      </div>\n      \n      <div class=\"contract-actions\">\n        <button id=\"review-contract-btn\" class=\"primary-button\" onclick=\"reviewGeneratedContract()\">\n          📋 Review Contract\n        </button>\n        <button id=\"analyze-new-contract-btn\" class=\"secondary-button\" onclick=\"analyzeContract()\">\n          🔍 Analyze Generated Contract\n        </button>\n      </div>\n      \n      <div class=\"next-steps\">\n        <h4>Next Steps:</h4>\n        <ul>\n          <li>Review the generated contract content</li>\n          <li>Run contract analysis to check for risks</li>\n          <li>Make any necessary modifications</li>\n          <li>Save and share with relevant parties</li>\n        </ul>\n      </div>\n    </div>`;\n\n  resultsContent.innerHTML = html;\n  resultsSection.style.display = \"block\";\n}\n\n// Display structured analysis results following the new AI prompt format\nexport function displayStructuredAnalysisResults(analysisResult) {\n  const resultsContent = document.getElementById(\"results-content\");\n  const resultsSection = document.getElementById(\"results-section\");\n\n  // Check if we have the new structured analysis format\n  if (!analysisResult.structured_analysis) {\n    // Fall back to the existing display function\n    console.log(\"No structured analysis found, using legacy display\");\n    return;\n  }\n\n  const structured = analysisResult.structured_analysis;\n\n  let html = `\n    <div class=\"structured-analysis-results\">\n      <div class=\"analysis-header\">\n        <h2>📋 AI Contract Analysis Report</h2>\n        <div class=\"analysis-meta\">\n          <p><strong>Contract Type:</strong> ${analysisResult.contract_type}</p>\n          <p><strong>Analysis Date:</strong> ${new Date(structured.analysis_timestamp).toLocaleString()}</p>\n          <p><strong>AI Prompt:</strong> ${structured.ai_prompt_used}</p>\n        </div>\n      </div>\n\n      <!-- 1. ARTICLE STRUCTURE (Following numbering: 1, 1.1, 1.1.1, 2, 2.1, etc.) -->\n      <div class=\"analysis-section article-structure\">\n        <h3>📑 Contract Structure Analysis</h3>\n        <div class=\"structure-summary\">\n          <p>Articles identified and numbered according to legal standards:</p>\n        </div>\n\n        <div class=\"articles-breakdown\">`;\n\n  // Display articles with proper numbering\n  structured.article_structure.forEach(article => {\n    html += `\n          <div class=\"article-container\">\n            <div class=\"article-header\">\n              <h4 class=\"article-number\">Article ${article.number}</h4>\n              <h5 class=\"article-title\">${article.title}</h5>\n            </div>\n\n            <div class=\"clauses-container\">`;\n\n    article.clauses.forEach(clause => {\n      html += `\n              <div class=\"clause-item\">\n                <span class=\"clause-number\">${clause.number}</span>\n                <div class=\"clause-content\">\n                  <p>${clause.content}</p>\n                  <small class=\"line-reference\">Line ${clause.line_number}</small>\n                </div>\n              </div>`;\n    });\n\n    html += `\n            </div>\n          </div>`;\n  });\n\n  html += `\n        </div>\n      </div>\n\n      <!-- 2. DEVIATION ANALYSIS -->\n      <div class=\"analysis-section deviation-analysis\">\n        <h3>⚖️ Standard Library Comparison</h3>\n        <div class=\"deviations-summary\">\n          <p>Deviations from company standard clauses:</p>\n        </div>\n\n        <div class=\"deviations-list\">`;\n\n  structured.deviation_analysis.forEach(deviation => {\n    const statusClass = deviation.negotiable_status === 'negotiable' ? 'negotiable' : 'non-negotiable';\n    const riskClass = `risk-${deviation.risk_level}`;\n\n    html += `\n          <div class=\"deviation-item ${statusClass} ${riskClass}\">\n            <div class=\"deviation-header\">\n              <span class=\"clause-ref\">Clause ${deviation.clause_reference}</span>\n              <span class=\"negotiable-badge ${deviation.negotiable_status}\">\n                ${deviation.negotiable_status.toUpperCase()}\n              </span>\n              <span class=\"risk-badge ${deviation.risk_level}\">\n                ${deviation.risk_level.toUpperCase()} RISK\n              </span>\n            </div>\n\n            <div class=\"deviation-content\">\n              <h5>${deviation.clause_title}</h5>\n              <p class=\"deviation-description\">${deviation.deviation_description}</p>\n\n              <div class=\"language-comparison\">\n                <div class=\"current-language\">\n                  <strong>Current Language:</strong>\n                  <p>${deviation.current_language}</p>\n                </div>\n                <div class=\"standard-language\">\n                  <strong>Standard Library:</strong>\n                  <p>${deviation.standard_language}</p>\n                </div>\n              </div>\n\n              <div class=\"business-impact\">\n                <strong>Business Impact:</strong> ${deviation.business_impact}\n              </div>\n            </div>\n          </div>`;\n  });\n\n  html += `\n        </div>\n      </div>\n\n      <!-- 3. IMPROVEMENT RECOMMENDATIONS -->\n      <div class=\"analysis-section improvement-recommendations\">\n        <h3>💡 Improvement Recommendations</h3>\n        <div class=\"recommendations-summary\">\n          <p>Specific language revisions and compliance recommendations:</p>\n        </div>\n\n        <div class=\"recommendations-list\">`;\n\n  structured.improvement_recommendations.forEach(recommendation => {\n    const priorityClass = `priority-${recommendation.priority}`;\n    const typeClass = `type-${recommendation.recommendation_type}`;\n\n    html += `\n          <div class=\"recommendation-item ${priorityClass} ${typeClass}\">\n            <div class=\"recommendation-header\">\n              <span class=\"clause-ref\">Clause ${recommendation.clause_reference}</span>\n              <span class=\"priority-badge ${recommendation.priority}\">\n                ${recommendation.priority.toUpperCase()}\n              </span>\n              <span class=\"type-badge ${recommendation.recommendation_type}\">\n                ${recommendation.recommendation_type.toUpperCase()}\n              </span>\n            </div>\n\n            <div class=\"recommendation-content\">\n              <div class=\"risk-score\">\n                <strong>Current Risk Score:</strong>\n                <span class=\"score\">${recommendation.current_risk_score}/100</span>\n              </div>\n\n              <div class=\"improved-language\">\n                <strong>Recommended Language:</strong>\n                <p>${recommendation.improved_language}</p>\n              </div>\n\n              <div class=\"benefits\">\n                <div class=\"risk-mitigation\">\n                  <strong>Risk Mitigation:</strong> ${recommendation.risk_mitigation}\n                </div>\n                <div class=\"business-benefit\">\n                  <strong>Business Benefit:</strong> ${recommendation.business_benefit}\n                </div>\n              </div>\n\n              <div class=\"implementation\">\n                <strong>Implementation Notes:</strong> ${recommendation.implementation_notes}\n              </div>\n            </div>\n          </div>`;\n  });\n\n  html += `\n        </div>\n      </div>\n\n      <!-- 4. SUMMARY METRICS -->\n      <div class=\"analysis-section summary-metrics\">\n        <h3>📊 Analysis Summary</h3>\n        <div class=\"metrics-grid\">\n          <div class=\"metric-card\">\n            <span class=\"metric-label\">Total Articles</span>\n            <span class=\"metric-value\">${structured.article_structure.length}</span>\n          </div>\n          <div class=\"metric-card\">\n            <span class=\"metric-label\">Deviations Found</span>\n            <span class=\"metric-value\">${structured.deviation_analysis.length}</span>\n          </div>\n          <div class=\"metric-card\">\n            <span class=\"metric-label\">Recommendations</span>\n            <span class=\"metric-value\">${structured.improvement_recommendations.length}</span>\n          </div>\n          <div class=\"metric-card\">\n            <span class=\"metric-label\">Compliance Score</span>\n            <span class=\"metric-value\">${analysisResult.compliance_score}%</span>\n          </div>\n        </div>\n      </div>\n    </div>`;\n\n  resultsContent.innerHTML = html;\n  resultsSection.style.display = \"block\";\n\n  // Show suggestions section if we have recommendations\n  if (structured.improvement_recommendations.length > 0) {\n    showStructuredSuggestionsSection(structured.improvement_recommendations);\n  }\n}\n\n// Show suggestions section for structured recommendations\nfunction showStructuredSuggestionsSection(recommendations) {\n  const suggestionsSection = document.getElementById(\"suggestions-section\");\n  const suggestionsContent = document.getElementById(\"suggestions-content\");\n\n  let html = `\n    <div class=\"structured-suggestions-header\">\n      <h3>🔧 Apply Recommended Changes</h3>\n      <p>Review and apply AI-recommended improvements to optimize your contract:</p>\n    </div>\n\n    <div class=\"structured-suggestions-list\">`;\n\n  recommendations.forEach((recommendation, index) => {\n    const priorityClass = `priority-${recommendation.priority}`;\n    const typeClass = `type-${recommendation.recommendation_type}`;\n\n    html += `\n      <div class=\"structured-suggestion-card ${priorityClass} ${typeClass}\">\n        <div class=\"suggestion-header\">\n          <span class=\"clause-ref\">Clause ${recommendation.clause_reference}</span>\n          <span class=\"priority-badge ${recommendation.priority}\">${recommendation.priority.toUpperCase()}</span>\n          <span class=\"type-badge ${recommendation.recommendation_type}\">${recommendation.recommendation_type.toUpperCase()}</span>\n        </div>\n        <div class=\"suggestion-content\">\n          <div class=\"risk-info\">\n            <strong>Current Risk Score:</strong> <span class=\"risk-score\">${recommendation.current_risk_score}/100</span>\n          </div>\n          <div class=\"improved-language\">\n            <strong>Recommended Language:</strong>\n            <p>${recommendation.improved_language}</p>\n          </div>\n          <div class=\"benefits\">\n            <p><strong>Business Benefit:</strong> ${recommendation.business_benefit}</p>\n          </div>\n        </div>\n        <div class=\"suggestion-actions\">\n          <button class=\"apply-structured-suggestion-btn\" onclick=\"applyStructuredSuggestion(${index})\">\n            Apply This Change\n          </button>\n        </div>\n      </div>`;\n  });\n\n  html += `\n    </div>\n\n    <div class=\"structured-suggestions-actions\">\n      <button id=\"apply-all-structured-changes-btn\" class=\"primary-button\" onclick=\"applyAllStructuredChanges()\">\n        Apply All Recommendations\n      </button>\n      <button id=\"dismiss-structured-suggestions-btn\" class=\"secondary-button\" onclick=\"dismissSuggestions()\">\n        Dismiss Suggestions\n      </button>\n    </div>`;\n\n  suggestionsContent.innerHTML = html;\n  suggestionsSection.style.display = \"block\";\n}\n\n// Display contract review results with revision workflow\nexport function displayContractReviewResults(reviewResults) {\n  const resultsContent = document.getElementById(\"results-content\");\n  const resultsSection = document.getElementById(\"results-section\");\n\n  const { acceptabilityStatus, complianceAnalysis, revisionPlan, nonAcceptableClauses, clauseBreakdown } = reviewResults;\n\n  // Determine status styling\n  const statusClass = {\n    'ready-for-legal': 'status-success',\n    'minor-revisions': 'status-warning',\n    'major-revisions': 'status-error',\n    'not-acceptable': 'status-critical'\n  }[acceptabilityStatus.status] || 'status-info';\n\n  let html = `\n    <div class=\"contract-review-results\">\n      <!-- Overall Status Header -->\n      <div class=\"review-header\">\n        <h2>📋 Contract Review Results</h2>\n        <div class=\"acceptability-status ${statusClass}\">\n          <div class=\"status-indicator\">\n            <span class=\"status-icon\">${getStatusIcon(acceptabilityStatus.status)}</span>\n            <span class=\"status-text\">${acceptabilityStatus.message}</span>\n          </div>\n          <div class=\"status-metrics\">\n            <span class=\"metric\">\n              <strong>${acceptabilityStatus.acceptablePercentage}%</strong> Acceptable\n            </span>\n            <span class=\"metric\">\n              <strong>${acceptabilityStatus.problematicClauses}</strong> Issues Found\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Quick Actions -->\n      <div class=\"review-actions\">\n        ${generateActionButtons(acceptabilityStatus, revisionPlan)}\n      </div>\n\n      <!-- Compliance Overview -->\n      <div class=\"compliance-overview\">\n        <h3>📊 Compliance Analysis</h3>\n        <div class=\"compliance-grid\">\n          <div class=\"compliance-card acceptable\">\n            <div class=\"card-number\">${complianceAnalysis.acceptableClauses.length}</div>\n            <div class=\"card-label\">Acceptable Clauses</div>\n          </div>\n          <div class=\"compliance-card problematic\">\n            <div class=\"card-number\">${complianceAnalysis.problematicClauses.length}</div>\n            <div class=\"card-label\">Issues Found</div>\n          </div>\n          <div class=\"compliance-card missing\">\n            <div class=\"card-number\">${complianceAnalysis.missingClauses.length}</div>\n            <div class=\"card-label\">Missing Clauses</div>\n          </div>\n          <div class=\"compliance-card score\">\n            <div class=\"card-number\">${complianceAnalysis.overallScore}%</div>\n            <div class=\"card-label\">Compliance Score</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Detailed Clause Breakdown -->\n      ${generateClauseBreakdownSection(clauseBreakdown)}\n\n      <!-- Next Steps -->\n      <div class=\"next-steps-section\">\n        <h3>📝 Next Steps</h3>\n        <ol class=\"next-steps-list\">\n          ${acceptabilityStatus.nextSteps.map(step => `<li>${step}</li>`).join('')}\n        </ol>\n      </div>\n\n      <!-- Detailed Issues (Collapsible) -->\n      <div class=\"detailed-issues\">\n        <h3>🔍 Detailed Analysis</h3>\n        <div class=\"issues-accordion\">\n          ${generateDetailedIssuesSection(complianceAnalysis)}\n        </div>\n      </div>\n    </div>`;\n\n  resultsContent.innerHTML = html;\n  resultsSection.style.display = \"block\";\n\n  // Add event listeners for interactive elements\n  addReviewEventListeners(reviewResults);\n}\n\nfunction getStatusIcon(status) {\n  const icons = {\n    'ready-for-legal': '✅',\n    'minor-revisions': '⚠️',\n    'major-revisions': '🔧',\n    'not-acceptable': '❌'\n  };\n  return icons[status] || '📋';\n}\n\nfunction generateActionButtons(acceptabilityStatus, revisionPlan) {\n  let buttons = '';\n\n  if (acceptabilityStatus.status === 'ready-for-legal') {\n    buttons = `\n      <button class=\"primary-button\" onclick=\"submitToLegal()\">\n        📤 Submit to Legal Review\n      </button>\n      <button class=\"secondary-button\" onclick=\"generateContractSummary()\">\n        📄 Generate Summary\n      </button>`;\n  } else if (revisionPlan.totalRevisions > 0) {\n    const autoReplaceable = revisionPlan.revisions.filter(r => r.autoReplaceable).length;\n\n    buttons = `\n      <button class=\"primary-button\" onclick=\"applyAutomaticRevisions()\" ${autoReplaceable === 0 ? 'disabled' : ''}>\n        🔧 Apply ${autoReplaceable} Automatic Revisions\n      </button>\n      <button class=\"secondary-button\" onclick=\"reviewManualChanges()\">\n        👁️ Review Manual Changes (${revisionPlan.totalRevisions - autoReplaceable})\n      </button>\n      <button class=\"tertiary-button\" onclick=\"rerunAnalysis()\">\n        🔄 Re-run Analysis\n      </button>`;\n  }\n\n  return buttons;\n}\n\nfunction generateClauseBreakdownSection(clauseBreakdown) {\n  if (!clauseBreakdown) {\n    return '<div class=\"clause-breakdown-section\"><p>Clause breakdown not available.</p></div>';\n  }\n\n  const hasModifications = clauseBreakdown.clausesNeedingModification > 0;\n\n  return `\n    <div class=\"clause-breakdown-section\">\n      <div class=\"breakdown-header\">\n        <h3>📋 Article & Clause Analysis</h3>\n        <div class=\"breakdown-summary\">\n          <span class=\"summary-item acceptable\">\n            ✅ ${clauseBreakdown.clausesAcceptable} Acceptable\n          </span>\n          <span class=\"summary-item needs-modification\">\n            🔧 ${clauseBreakdown.clausesNeedingModification} Need Modification\n          </span>\n        </div>\n      </div>\n\n      ${hasModifications ? `\n        <div class=\"auto-update-controls\">\n          <label class=\"auto-update-checkbox\">\n            <input type=\"checkbox\" id=\"auto-update-all\" onchange=\"toggleAutoUpdate(this.checked)\">\n            <span class=\"checkmark\"></span>\n            Automatically Update All Clauses\n          </label>\n          <button class=\"accept-all-button\" onclick=\"acceptAllChanges()\" ${hasModifications ? '' : 'disabled'}>\n            ✅ Accept All Changes (${clauseBreakdown.clausesNeedingModification})\n          </button>\n        </div>` : ''}\n\n      <div class=\"articles-container\">\n        ${clauseBreakdown.articles.map(article => generateArticleSection(article)).join('')}\n      </div>\n    </div>`;\n}\n\nfunction generateArticleSection(article) {\n  return `\n    <div class=\"article-section\">\n      <div class=\"article-header\">\n        <h4>${article.articleNumber}. ${article.title}</h4>\n        <div class=\"article-summary\">\n          ${article.clausesNeedingModification > 0 ?\n            `<span class=\"modification-count\">${article.clausesNeedingModification} modification${article.clausesNeedingModification > 1 ? 's' : ''} needed</span>` :\n            `<span class=\"no-modifications\">No modifications needed</span>`\n          }\n        </div>\n      </div>\n\n      <div class=\"clauses-container\">\n        ${article.clauses.map(clause => generateClauseItem(clause)).join('')}\n      </div>\n    </div>`;\n}\n\nfunction generateClauseItem(clause) {\n  const statusIcon = clause.needsModification ? '🔧' : '✅';\n  const statusClass = clause.needsModification ? 'needs-modification' : 'acceptable';\n  const statusText = clause.needsModification ? 'Will be modified' : 'No changes needed';\n\n  return `\n    <div class=\"clause-item ${statusClass}\" data-clause-number=\"${clause.clauseNumber}\">\n      <div class=\"clause-header\">\n        <div class=\"clause-number-status\">\n          <span class=\"clause-number\">${clause.clauseNumber}</span>\n          <span class=\"status-indicator\">\n            <span class=\"status-icon\">${statusIcon}</span>\n            <span class=\"status-text\">${statusText}</span>\n          </span>\n        </div>\n        ${clause.needsModification ? `\n          <div class=\"clause-actions\">\n            <button class=\"modify-button\" onclick=\"applyClauseModification('${clause.clauseNumber}')\">\n              🔧 Apply Change\n            </button>\n            <button class=\"preview-button\" onclick=\"previewClauseChange('${clause.clauseNumber}')\">\n              👁️ Preview\n            </button>\n          </div>` : ''}\n      </div>\n\n      <div class=\"clause-content\">\n        <div class=\"current-text\">\n          <strong>Current:</strong> ${clause.text.substring(0, 150)}${clause.text.length > 150 ? '...' : ''}\n        </div>\n\n        ${clause.needsModification && clause.recommendedText ? `\n          <div class=\"recommended-text\">\n            <strong>Recommended:</strong> ${clause.recommendedText.substring(0, 150)}${clause.recommendedText.length > 150 ? '...' : ''}\n          </div>\n          <div class=\"change-reason\">\n            <strong>Reason:</strong> ${clause.changeReason}\n          </div>` : ''}\n      </div>\n    </div>`;\n}\n\nfunction generateRevisionPlanSection(revisionPlan, nonAcceptableClauses) {\n  if (revisionPlan.totalRevisions === 0) {\n    return `\n      <div class=\"revision-plan-section\">\n        <h3>✅ No Revisions Needed</h3>\n        <p>All clauses meet the required standards.</p>\n      </div>`;\n  }\n\n  const highPriority = revisionPlan.revisions.filter(r => r.priority === 'high');\n  const mediumPriority = revisionPlan.revisions.filter(r => r.priority === 'medium');\n  const lowPriority = revisionPlan.revisions.filter(r => r.priority === 'low');\n\n  return `\n    <div class=\"revision-plan-section\">\n      <h3>🔧 Revision Plan (${revisionPlan.totalRevisions} items)</h3>\n\n      ${highPriority.length > 0 ? `\n        <div class=\"priority-group high-priority\">\n          <h4>🚨 High Priority (${highPriority.length})</h4>\n          <div class=\"revision-items\">\n            ${highPriority.map(revision => generateRevisionItem(revision)).join('')}\n          </div>\n        </div>` : ''}\n\n      ${mediumPriority.length > 0 ? `\n        <div class=\"priority-group medium-priority\">\n          <h4>⚠️ Medium Priority (${mediumPriority.length})</h4>\n          <div class=\"revision-items\">\n            ${mediumPriority.map(revision => generateRevisionItem(revision)).join('')}\n          </div>\n        </div>` : ''}\n\n      ${lowPriority.length > 0 ? `\n        <div class=\"priority-group low-priority\">\n          <h4>ℹ️ Low Priority (${lowPriority.length})</h4>\n          <div class=\"revision-items\">\n            ${lowPriority.map(revision => generateRevisionItem(revision)).join('')}\n          </div>\n        </div>` : ''}\n    </div>`;\n}\n\nfunction generateRevisionItem(revision) {\n  const actionIcon = {\n    'replace': '🔄',\n    'revise': '✏️',\n    'review': '👁️'\n  }[revision.recommendedAction] || '📝';\n\n  return `\n    <div class=\"revision-item\" data-clause-id=\"${revision.clauseId}\">\n      <div class=\"revision-header\">\n        <span class=\"revision-icon\">${actionIcon}</span>\n        <span class=\"clause-id\">Clause ${revision.clauseId}</span>\n        <span class=\"revision-action\">${revision.recommendedAction.toUpperCase()}</span>\n        ${revision.autoReplaceable ? '<span class=\"auto-badge\">AUTO</span>' : '<span class=\"manual-badge\">MANUAL</span>'}\n      </div>\n      <div class=\"revision-content\">\n        <div class=\"current-text\">\n          <strong>Current:</strong> ${revision.currentText.substring(0, 100)}...\n        </div>\n        ${revision.replacementOptions.length > 0 ? `\n          <div class=\"replacement-options\">\n            <strong>Recommended:</strong> ${revision.replacementOptions[0].content.substring(0, 100)}...\n          </div>` : ''}\n        <div class=\"revision-issues\">\n          <strong>Issues:</strong> ${revision.issues.map(issue => issue.description).join(', ')}\n        </div>\n      </div>\n      <div class=\"revision-actions\">\n        ${revision.autoReplaceable ?\n          `<button class=\"mini-button primary\" onclick=\"applyRevision('${revision.clauseId}')\">Apply</button>` :\n          `<button class=\"mini-button secondary\" onclick=\"reviewRevision('${revision.clauseId}')\">Review</button>`\n        }\n        <button class=\"mini-button tertiary\" onclick=\"viewDetails('${revision.clauseId}')\">Details</button>\n      </div>\n    </div>`;\n}\n\nfunction generateDetailedIssuesSection(complianceAnalysis) {\n  return `\n    <div class=\"accordion-item\">\n      <div class=\"accordion-header\" onclick=\"toggleAccordion('problematic-clauses')\">\n        <span>❌ Problematic Clauses (${complianceAnalysis.problematicClauses.length})</span>\n        <span class=\"accordion-icon\">▼</span>\n      </div>\n      <div class=\"accordion-content\" id=\"problematic-clauses\">\n        ${complianceAnalysis.problematicClauses.map(clause => `\n          <div class=\"issue-item\">\n            <strong>Clause ${clause.clauseId}:</strong> ${clause.issues.map(issue => issue.description).join(', ')}\n          </div>\n        `).join('')}\n      </div>\n    </div>\n\n    <div class=\"accordion-item\">\n      <div class=\"accordion-header\" onclick=\"toggleAccordion('missing-clauses')\">\n        <span>➕ Missing Clauses (${complianceAnalysis.missingClauses.length})</span>\n        <span class=\"accordion-icon\">▼</span>\n      </div>\n      <div class=\"accordion-content\" id=\"missing-clauses\">\n        ${complianceAnalysis.missingClauses.map(clause => `\n          <div class=\"issue-item\">\n            <strong>${clause.title}:</strong> ${clause.content.substring(0, 100)}...\n          </div>\n        `).join('')}\n      </div>\n    </div>`;\n}\n\nfunction addReviewEventListeners(reviewResults) {\n  // Store review results globally for access by event handlers\n  window.currentReviewResults = reviewResults;\n\n  // Add accordion functionality\n  window.toggleAccordion = function(id) {\n    const content = document.getElementById(id);\n    const header = content.previousElementSibling;\n    const icon = header.querySelector('.accordion-icon');\n\n    if (content.style.display === 'none' || !content.style.display) {\n      content.style.display = 'block';\n      icon.textContent = '▲';\n    } else {\n      content.style.display = 'none';\n      icon.textContent = '▼';\n    }\n  };\n\n  // Add clause modification functionality\n  window.applyClauseModification = async function(clauseNumber) {\n    try {\n      const { contractReviewer } = await import('../services/contract-reviewer.js');\n      const { updateStatus } = await import('../../shared/utils.js');\n\n      // Find the clause in current review results\n      const clause = findClauseByNumber(clauseNumber);\n      if (!clause || !clause.recommendedText) {\n        updateStatus(`No recommended text found for clause ${clauseNumber}`, 'error');\n        return;\n      }\n\n      updateStatus(`Applying modification to clause ${clauseNumber}...`, 'info');\n\n      const result = await contractReviewer.applyClauseModification(clauseNumber, clause.recommendedText);\n\n      if (result.success) {\n        updateStatus(`Clause ${clauseNumber} modified successfully!`, 'success');\n\n        // Update the UI to reflect the change\n        updateClauseUI(clauseNumber, true);\n\n        // Check if auto-update is enabled\n        const autoUpdate = document.getElementById('auto-update-all');\n        if (autoUpdate && autoUpdate.checked) {\n          // Continue with next modification if auto-update is on\n          setTimeout(() => applyNextModification(), 500);\n        }\n      } else {\n        updateStatus(`Failed to modify clause ${clauseNumber}: ${result.error}`, 'error');\n      }\n    } catch (error) {\n      const { updateStatus } = await import('../../shared/utils.js');\n      updateStatus(`Error modifying clause ${clauseNumber}: ${error.message}`, 'error');\n    }\n  };\n\n  window.previewClauseChange = function(clauseNumber) {\n    const clause = findClauseByNumber(clauseNumber);\n    if (!clause) return;\n\n    // Create a modal or popup to show the full before/after comparison\n    const modal = document.createElement('div');\n    modal.className = 'clause-preview-modal';\n    modal.innerHTML = `\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h3>Preview Change - Clause ${clauseNumber}</h3>\n          <button class=\"close-modal\" onclick=\"closePreviewModal()\">&times;</button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"before-after\">\n            <div class=\"before-section\">\n              <h4>Current Text:</h4>\n              <div class=\"text-content\">${clause.text}</div>\n            </div>\n            <div class=\"after-section\">\n              <h4>Recommended Text:</h4>\n              <div class=\"text-content\">${clause.recommendedText}</div>\n            </div>\n            <div class=\"reason-section\">\n              <h4>Reason for Change:</h4>\n              <div class=\"reason-content\">${clause.changeReason}</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button class=\"primary-button\" onclick=\"applyClauseModification('${clauseNumber}'); closePreviewModal();\">\n            Apply Change\n          </button>\n          <button class=\"secondary-button\" onclick=\"closePreviewModal()\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(modal);\n  };\n\n  window.closePreviewModal = function() {\n    const modal = document.querySelector('.clause-preview-modal');\n    if (modal) {\n      modal.remove();\n    }\n  };\n\n  window.acceptAllChanges = async function() {\n    try {\n      const { contractReviewer } = await import('../services/contract-reviewer.js');\n      const { updateStatus } = await import('../../shared/utils.js');\n\n      updateStatus('Applying all clause modifications...', 'info');\n\n      const results = await contractReviewer.applyAllModifications();\n\n      if (results.applied.length > 0) {\n        updateStatus(`Successfully applied ${results.applied.length} modifications!`, 'success');\n\n        // Update UI for all applied changes\n        results.applied.forEach(result => {\n          updateClauseUI(result.clauseNumber, true);\n        });\n\n        // Re-run analysis to show updated status\n        setTimeout(() => {\n          window.rerunAnalysis();\n        }, 1000);\n      }\n\n      if (results.failed.length > 0) {\n        updateStatus(`${results.failed.length} modifications failed. Check console for details.`, 'warning');\n        console.error('Failed modifications:', results.failed);\n      }\n\n    } catch (error) {\n      const { updateStatus } = await import('../../shared/utils.js');\n      updateStatus(`Error applying modifications: ${error.message}`, 'error');\n    }\n  };\n\n  window.toggleAutoUpdate = function(enabled) {\n    const acceptAllButton = document.querySelector('.accept-all-button');\n    if (acceptAllButton) {\n      if (enabled) {\n        acceptAllButton.textContent = '🔄 Auto-Applying Changes...';\n        acceptAllButton.disabled = true;\n        // Start auto-applying changes\n        setTimeout(() => window.acceptAllChanges(), 500);\n      } else {\n        acceptAllButton.textContent = `✅ Accept All Changes (${window.currentReviewResults?.clauseBreakdown?.clausesNeedingModification || 0})`;\n        acceptAllButton.disabled = false;\n      }\n    }\n  };\n}\n\nfunction findClauseByNumber(clauseNumber) {\n  if (!window.currentReviewResults || !window.currentReviewResults.clauseBreakdown) {\n    return null;\n  }\n\n  for (const article of window.currentReviewResults.clauseBreakdown.articles) {\n    for (const clause of article.clauses) {\n      if (clause.clauseNumber === clauseNumber) {\n        return clause;\n      }\n    }\n  }\n  return null;\n}\n\nfunction updateClauseUI(clauseNumber, applied) {\n  const clauseElement = document.querySelector(`[data-clause-number=\"${clauseNumber}\"]`);\n  if (clauseElement) {\n    if (applied) {\n      clauseElement.classList.remove('needs-modification');\n      clauseElement.classList.add('acceptable');\n\n      const statusIcon = clauseElement.querySelector('.status-icon');\n      const statusText = clauseElement.querySelector('.status-text');\n      const actions = clauseElement.querySelector('.clause-actions');\n\n      if (statusIcon) statusIcon.textContent = '✅';\n      if (statusText) statusText.textContent = 'Applied';\n      if (actions) actions.style.display = 'none';\n    }\n  }\n}\n\nfunction applyNextModification() {\n  // Find the next clause that needs modification\n  const nextClause = document.querySelector('.clause-item.needs-modification .modify-button');\n  if (nextClause) {\n    nextClause.click();\n  }\n}\n"],"names":["_regeneratorRuntime","r","t","e","Object","prototype","n","hasOwnProperty","o","Symbol","i","iterator","a","asyncIterator","u","toStringTag","c","defineProperty","value","enumerable","configurable","writable","h","Generator","create","Error","done","method","arg","delegate","d","f","sent","_sent","dispatchException","abrupt","s","type","Context","call","wrap","GeneratorFunction","GeneratorFunctionPrototype","l","p","getPrototypeOf","y","x","v","g","forEach","_invoke","AsyncIterator","_typeof","resolve","__await","then","return","TypeError","next","w","tryEntries","push","m","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","slice","stop","rval","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","displayCombinedAnalysisResults","analysisResult","riskAnalysis","changeSuggestions","summaryResult","resultsContent","document","getElementById","resultsSection","structure","contract_structure","modifiedClauses","articles","reduce","count","article","clauses","filter","clause","_clause$changeStatus","changeStatus","isModified","totalClauses","html","concat","number","title","_clause$changeStatus2","_clause$changeStatus3","statusClass","statusColor","text","substring","trackChanges","enabled","note","demoMode","overview","contract_type","word_count","compliance_score","risk_score","summary","risks","risk","severityClass","severity","toUpperCase","description","suggestion","suggestions","priorityClass","priority","current","suggested","benefit","key_terms","term","recommendations","rec","innerHTML","style","display","showSuggestionsSection","suggestionsSection","suggestionsContent","index","displayContractResults","result","_result$metadata","_result$metadata2","metadata","template_used","Date","generated_at","toLocaleString","displayStructuredAnalysisResults","structured_analysis","structured","analysis_timestamp","ai_prompt_used","article_structure","content","line_number","deviation_analysis","deviation","negotiable_status","riskClass","risk_level","clause_reference","clause_title","deviation_description","current_language","standard_language","business_impact","improvement_recommendations","recommendation","typeClass","recommendation_type","current_risk_score","improved_language","risk_mitigation","business_benefit","implementation_notes","showStructuredSuggestionsSection","console","log","displayContractReviewResults","reviewResults","status","acceptabilityStatus","complianceAnalysis","revisionPlan","clauseBreakdown","nonAcceptableClauses","message","acceptablePercentage","problematicClauses","buttons","totalRevisions","autoReplaceable","revisions","generateActionButtons","acceptableClauses","missingClauses","overallScore","hasModifications","clausesNeedingModification","clausesAcceptable","map","articleNumber","statusIcon","needsModification","statusText","clauseNumber","recommendedText","changeReason","generateClauseItem","join","generateArticleSection","generateClauseBreakdownSection","nextSteps","step","clauseId","issues","issue","generateDetailedIssuesSection","window","currentReviewResults","toggleAccordion","id","icon","previousElementSibling","querySelector","textContent","applyClauseModification","_ref","_callee","_yield$import","contractReviewer","_yield$import2","updateStatus","autoUpdate","_context","findClauseByNumber","success","updateClauseUI","checked","setTimeout","nextClause","click","error","t0","_x","previewClauseChange","modal","createElement","className","body","appendChild","closePreviewModal","remove","acceptAllChanges","_callee2","_yield$import4","_yield$import5","results","_context2","applyAllModifications","applied","rerunAnalysis","failed","toggleAutoUpdate","_window$currentReview","acceptAllButton","disabled","addReviewEventListeners","_step","_iterator","_createForOfIteratorHelper","_step2","_iterator2","err","clauseElement","classList","add","actions"],"sourceRoot":""}